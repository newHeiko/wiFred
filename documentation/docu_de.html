<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<meta name="description" content="Usage documentation, server choices, building instructions, schematics, part lists...">
<meta name="author" content="Heiko Rosemann">
<title>wiFred: WLAN-Drehregler für Modelleisenbahnen mit dem wiThrottle-Protokoll</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>wiFred: WLAN-Drehregler für Modelleisenbahnen mit dem wiThrottle-Protokoll</h1>
<div class="details">
<span id="author" class="author">Heiko Rosemann</span><br>
<span id="revnumber">version 0.3,</span>
<span id="revdate">6-27-2021</span>
<br><span id="revremark">v0.6 Beschreibung hinzugefügt - automatisch übersetzt von Axel Thobaben unter Verwendung von Microsoft Edge</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_zusammenfassung">Zusammenfassung</a></li>
<li><a href="#throttle">Schnellstartanleitung</a>
<ul class="sectlevel2">
<li><a href="#_erste_inbetriebnahme">Erste Inbetriebnahme</a></li>
</ul>
</li>
<li><a href="#_verwendung">Verwendung</a>
<ul class="sectlevel2">
<li><a href="#_betriebsloks">Betriebsloks</a></li>
<li><a href="#_aufladen_des_wifred">Aufladen des wiFred</a></li>
</ul>
</li>
<li><a href="#config">Konfigurieren des wiFred</a>
<ul class="sectlevel2">
<li><a href="#_wechseln_in_den_konfigurationsmodus">Wechseln in den Konfigurationsmodus</a></li>
<li><a href="#_allgemeine_konfiguration">Allgemeine Konfiguration</a></li>
<li><a href="#_wlan_konfiguration">WLAN-Konfiguration</a></li>
<li><a href="#_lok_server_konfiguration">Lok-Server-Konfiguration</a></li>
<li><a href="#throttle_LocoConf">Loco configuration</a></li>
<li><a href="#throttle_FunctionConf">Konfiguration der DCC-Funktion</a></li>
<li><a href="#_wifred_status">wiFred-Status</a></li>
<li><a href="#_wifred_system">wiFred-System</a></li>
</ul>
</li>
<li><a href="#serverSetup">Optionen für die Servereinrichtung</a>
<ul class="sectlevel2">
<li><a href="#_komponenten_die_zum_betrieb_des_wifred_erforderlich_sind">Komponenten, die zum Betrieb des wiFred erforderlich sind</a></li>
<li><a href="#_sofort_einsatzbereite_serverseitige_optionen">Sofort einsatzbereite serverseitige Optionen</a></li>
<li><a href="#windowsWiFi">Schritt-für-Schritt-Anleitung für einen Windows-Computer-Hotspot</a></li>
<li><a href="#serverWiFi">Anforderungen an WLAN Access Points</a></li>
<li><a href="#serverJMRI">JMRI-Serveranforderungen</a></li>
<li><a href="#serverLayoutConn">Layout-Verbindungsoptionen</a></li>
<li><a href="#configurationComputer">Computer oder Smartphone zur Konfiguration von wiFred</a></li>
</ul>
</li>
<li><a href="#_hardware_beschreibung">Hardware-Beschreibung</a>
<ul class="sectlevel2">
<li><a href="#_ab_revision_0_6">Ab Revision 0.6</a></li>
<li><a href="#_schreiben_der_firmware_auf_den_esp32_s2_wroom">Schreiben der Firmware auf den ESP32-S2-WROOM</a></li>
<li><a href="#_tipps_zum_aufbau_der_revision_0_6">Tipps zum Aufbau der Revision 0.6</a></li>
<li><a href="#_bis_revision_0_5">Bis Revision 0.5</a></li>
<li><a href="#hintsFor05">Tipps zum Aufbau der Revision bis 0.5</a></li>
<li><a href="#flashing05">Schreiben der Firmware auf wiFreds der Revision 0.5 und älter</a></li>
<li><a href="#oldThrottle">Erster Prototyp mit AA-Akkus</a></li>
<li><a href="#_tipps_zum_bau_des_wifred_aa_batterieprototyps">Tipps zum Bau des wiFred AA Batterieprototyps</a></li>
</ul>
</li>
<li><a href="#background">Hintergrund für die wiFred-Entwicklung</a>
<ul class="sectlevel2">
<li><a href="#_spezifikation_wunschliste">Spezifikation Wunschliste</a></li>
<li><a href="#_entwicklungsgeschichte">Entwicklungsgeschichte</a></li>
<li><a href="#_drahtlose_uhr">Drahtlose Uhr</a></li>
</ul>
</li>
<li><a href="#_quellen">Quellen</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/2021-01-23-preview0001.jpg" alt="wiFred mit lasergraviertem Gehäuse">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_zusammenfassung">Zusammenfassung</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dieses Dokument beschreibt die Verwendung und Konfiguration des wiFred - eine sehr einfache drahtlose Drehregler für Modelleisenbahnen, um sich mit wiThrottle-Servern wie JMRI zu verbinden. Es enthält auch Schaltpläne und Stücklisten für das Gerät - sowohl für LiPo-Akkuversionen in der aktiven Entwicklung - als auch Programmieranleitungen und Montagetipps sowie eine Übersicht über Optionen für die Serverseite.</p>
</div>
<div class="paragraph">
<p>Die neueste Version dieses Dokuments finden Sie unter <a href="https://newheiko.github.io/wiFred/documentation/docu_de.html" class="bare">https://newheiko.github.io/wiFred/documentation/docu_de.html</a>, <a href="https://github.com/newHeiko/wiFred/raw/master/docu_de.pdf" class="bare">https://github.com/newHeiko/wiFred/raw/master/docu_de.pdf</a> und <a href="https://github.com/newHeiko/wiFred/blob/master/docu_de.adoc" class="bare">https://github.com/newHeiko/wiFred/blob/master/docu_de.adoc</a>.</p>
</div>
<div class="paragraph">
<p>Wenn Sie mehr über die Entwicklungsgeschichte des wiFred erfahren möchten, springen Sie zu <a href="#background">Hintergrund für die wiFred-Entwicklung</a> - ansonsten lesen Sie weiter mit <a href="#throttle">Schnellstartanleitung</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="throttle">Schnellstartanleitung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_erste_inbetriebnahme">Erste Inbetriebnahme</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Laden Sie das Gerät mit einem Micro-USB- oder USB-C-Ladegerät, bis die LADE-LED auf grün schaltet</p>
</li>
<li>
<p>Gerät mit noch angeschlossenem Ladegerät einschalten (kalibriert Batteriespannungsmessung)</p>
</li>
<li>
<p>Warten Sie, bis die rote LED oben aufhört zu blinken und leuchtet</p>
</li>
<li>
<p>Verwenden Sie ein beliebiges WLAN-Gerät, um nach dem Netzwerk wiFred-configXXXX zu suchen und eine Verbindung herzustellen</p>
</li>
<li>
<p>Herstellen einer Verbindung mit <a href="http://config.local" class="bare">http://config.local</a> und Konfigurieren des Geräts</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Weitere Informationen finden Sie unter <a href="https://newHeiko.github.io/wiFred/documentation/docu_de.html" class="bare">https://newHeiko.github.io/wiFred/documentation/docu_de.html</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verwendung">Verwendung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_betriebsloks">Betriebsloks</h3>
<table id="ledTable" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. LED-Muster und ihre Bedeutung auf dem wiFred</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rote LED</th>
<th class="tableblock halign-left valign-top">Grüne LED (links)</th>
<th class="tableblock halign-left valign-top">Grüne LED (rechts)</th>
<th class="tableblock halign-left valign-top">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Langsames Blinken (0.5 Hz)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versuch, eine Verbindung zum WLAN-Netzwerk herzustellen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schnelles Blinken (2 Hz)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Erfolgreiche WLAN-Verbindung, Versuch, eine Verbindung zum wiThrottle-Server herzustellen und Loks zu erwerben</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regelbetrieb, Vorwärtsrichtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regelbetrieb, Rückwärtsrichtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not-Halt, Vorwärtsrichtung. Passiert auch beim Richtungswechsel mit Drehzahlpotentiometer nicht bei Null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not-Halt, umgekehrte Richtung. Passiert auch beim Richtungswechsel mit Drehzahlpotentiometer nicht bei Null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batterie schwach, Regelbetrieb, Vorwärtsrichtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batterie schwach, normaler Betrieb, umgekehrte Richtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batterie schwach, Not-Halt, Vorwärtsrichtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batterie schwach, Not-Halt, umgekehrte Richtung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kurze Blitze</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handregler im Low-Power-Modus</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batterie leer oder kein Akku eingelegt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keine Verbindung zum vorhandenen WLAN-Netzwerk. Interne Konfiguration WiFi-Netzwerk erstellt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beim Start: ESTOP gedrückt, wird nach fünf Sekunden auf die Werkseinstellungen zurückgesetzt. Taste loslassen für normalen Start<sup class="footnote" id="_footnote_ESP32">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beim Start: SHIFT gedrückt, öffnet das interne Konfigurations-WLAN-Netzwerk nach fünf Sekunden. Taste loslassen für normalen Start<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beim Start: F0 gedrückt, wenn eine Verbindung mit einem WLAN hergestellt wird. Stellt keine Verbindung zum Server her, sondern aktiviert den Konfigurationsmodus nach fünf Sekunden. Taste loslassen für normalen Start<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsmodus aktiviert, während eine Verbindung mit dem vorhandenen WLAN-Netzwerk besteht. Alle Loks Not-Halt, um Ausreißer zu vermeiden. Drücken Sie erneut SHIFT + ESTOP, um den Konfigurationsmodus zu beenden</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock">Um sich von einem Not-Halt zu erholen, drehen Sie das Geschwindigkeitspotentiometer auf Null, um die Verstärkungssteuerung wiederherzustellen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock">Siehe auch <a href="#ledTableVoltage">LED-Muster und wie sie die Batteriespannung beim Ausschalten des wiFred anzeigen</a> um die LED-Muster beim Ausschalten aller Loks zu interpretieren.</p></td>
</tr>
</tbody>
</table>
<table id="ledTableVoltage" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. LED-Muster und wie sie die Batteriespannung beim Ausschalten des wiFred anzeigen</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rote LED</th>
<th class="tableblock halign-left valign-top">Grüne LED (links)</th>
<th class="tableblock halign-left valign-top">Grüne LED (rechts)</th>
<th class="tableblock halign-left valign-top">Batteriespannung</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unter 3,7V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zwischen 3,7V und 3,8V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zwischen 3,8V und 3,9V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zwischen 3,9V und 4,0V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blinken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Über 4,0V</p></td>
</tr>
</tbody>
</table>
<div id="throttleControls" class="imageblock">
<div class="content">
<img src="images/DSC0690.jpg" alt="Handregler">
</div>
<div class="title">Figure 1. Bedienelemente und Funktionen des wiFred-Handreglers</div>
</div>
<div class="paragraph">
<p><a href="#throttleControls">Bedienelemente und Funktionen des wiFred-Handreglers</a> zeigt die Bedienelemente der drahtlosen Drosselklappe. Sie bestehen aus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Vier Lokauswahlschalter (Lok 1 links, Lok 4 rechts, Drehzahl potentiometer aktivieren)</p>
</li>
<li>
<p>Geschwindigkeitspotentiometer (Gegen den Uhrzeigersinn Endstop: Stop, Endstop im Uhrzeigersinn: Full Speed)</p>
</li>
<li>
<p>Richtungsschalter - bewegen Sie sich nach rechts für Vorwärtsbewegung, links für Rückwärtsbewegung</p>
</li>
<li>
<p>Schwarze Funktionstasten F0 bis F8</p>
</li>
<li>
<p>Gelbe Shift-Taste zum Auslösen von F9-F16 und Einschalten der Taschenlampenfunktion</p>
</li>
<li>
<p>Rote Nothalt-Taste</p>
</li>
<li>
<p>Zwei grüne Fahrtrichtungsanzeige-LEDs neben dem Drehzahlpotentiometer</p>
</li>
<li>
<p>Rote Status-LED neben Drehzahlpotentiometer</p>
</li>
<li>
<p>Rote Ladeanzeige-LED am unteren Ende des Geräts - leuchtet während des Ladevorgangs</p>
</li>
<li>
<p>Grüne voll aufgeladene Anzeige-LED am unteren Ende des Geräts - leuchtet bei voller Ladung, solange das Ladegerät noch angeschlossen ist</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sobald einer der Lokauswahlschalter in die Position "aktiviert" bewegt wird, wird der Handregler hochgefahren und versucht, eine Verbindung zu einem drahtlosen Netzwerk herzustellen. Wenn alle vier Lokauswahlschalter "deaktiviert" sind, trennt sich die Drehregler nach einer Kulanzzeit von fünf Sekunden vom drahtlosen Netzwerk. Das Gerät wechselt dann in den Energiesparmodus, in dem der Akku länger als ein Jahr hält.</p>
</div>
<div class="paragraph">
<p>Wenn innerhalb von 60 Sekunden keine Verbindung zu dem im Gerät konfigurierten Netzwerk hergestellt werden kann, erstellt die Drehregler ein eigenes drahtloses Netzwerk namens wiFred-config sowie vier Hex-Ziffern, die von der MAC-Adresse der Drossel-WLAN-Schnittstelle, z. B. wiFred-config0CAC, entnommen wurden, um die Konfiguration wie unter <a href="#config">Konfigurieren des wiFred</a> beschrieben zu aktivieren.</p>
</div>
<div class="paragraph">
<p>Den vier Lokauswahlschaltern können vier verschiedene Loks zugeordnet werden. Befehle, die vom Geschwindigkeitspotentiometer, dem Richtungsschalter und den Funktionstasten abgeleitet werden, werden (quasi) gleichzeitig an alle ausgewählten Loks übertragen, wobei eine bestimmte Übersetzungstabelle es ermöglicht, dass einige Loks rückwärts fahren, wenn andere vorwärts fahre, und auch Funktionstasten nur auf einige der vier Loks beschränkt - dies wird in <a href="#throttle_LocoConf">Loco configuration</a> und <a href="#throttle_FunctionConf">Konfiguration der DCC-Funktion</a> ausführlicher beschrieben.</p>
</div>
<div class="paragraph">
<p>Durch Drücken der roten Nothalt-Taste sendet der Handregler einen Nothalt-Befehl an alle vier angeschlossenen Loks. Drehen Sie nach einem Not-Halt das Geschwindigkeitspotentiometer auf Null, um die Steuerung der Loks wieder zu aktivieren.</p>
</div>
<div class="paragraph">
<p>Wenn Sie die rote Not-Aus-Taste drücken, während Sie die Umschalttaste gedrückt halten, wird das Gerät in den Konfigurationsmodus versetzt (und es wird ein Not-Halt für alle angeschlossenen Loks ausgelöst). Weitere Informationen zum Zugriff auf die Konfiguration des Handreglers finden Sie unter <a href="#config">Konfigurieren des wiFred</a>.</p>
</div>
<div class="paragraph">
<p>Jede Änderung der Lokauswahlschalter führt dazu, dass der Handregler einen Not-Halt-Befehl an alle angeschlossenen Loks sendet. Dadurch wird sichergestellt, dass jede Lok, die deaktiviert wird, auf dem Layout anhält und verhindert, dass neu ausgewählte Loks plötzlich mit Geschwindigkeit abheben. Gleiches gilt für eine Änderung des Richtungswechsels, um Schnelle Rückwärtsmanöver zu vermeiden. Drehen Sie das Geschwindigkeitspotentiometer auf Null, um die Steuerung der Loks wieder zu aktivieren.</p>
</div>
<div class="paragraph">
<p>Wenn der Akku schwach ist, wird das Gerät vor dem Laden der Batterien nicht wieder aktiviert, aber wenn es schon aktiv ist, läuft es etwa eine Stunde weiter. Wenn der Akku leer ist, wird er getrennt und in den Energiesparmodus versetzt. Die erwartete Laufzeit beträgt etwa 20 Stunden Vollzeitbetrieb, mehr, wenn die Drehregler in den Energiesparmodus versetzt wird, wenn die Loks nicht laufen.</p>
</div>
<div class="paragraph">
<p>Während der Inbetriebnahme und des Betriebs zeigen die LEDs die in <a href="#ledTable">LED-Muster und ihre Bedeutung auf dem wiFred</a> beschriebenen Muster an. Nach dem Ausschalten des wiFred zeigen die LEDs für einige Sekunden die aktuelle Batteriespannung an, wie in <a href="#ledTableVoltage">LED-Muster und wie sie die Batteriespannung beim Ausschalten des wiFred anzeigen</a> beschrieben.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aufladen_des_wifred">Aufladen des wiFred</h3>
<div class="paragraph">
<p>Der wiFred kann über den Micro-USB- oder USB-C-Anschluss am unteren Ende des Gerätes aufgeladen werden. Der maximale Ladestrom beträgt ca. 400 mA und das Gerät kommuniziert nicht mit dem USB-Host, so dass technisch gesehen keine Garantie dafür besteht, dass das Aufladen über ein USB-Kabel funktioniert, aber die meisten Ladegeräte, Computeranschlüsse oder Powerbanks überprüfen den Strom vor dem Einschalten nicht.</p>
</div>
<div class="paragraph">
<p>Solange der Akku geladen wird, leuchtet die rote Ladeanzeige-LED. Wenn der Akku vollständig geladen ist, leuchtet die grüne Anzeige-LED, solange das Ladegerät noch angeschlossen ist. Die erwartete Ladezeit beträgt etwa fünf bis sechs Stunden für eine vollständige Ladung.</p>
</div>
<div class="paragraph">
<p>Auch während des Ladevorgangs kann das Gerät noch betrieben werden (besonders hilfreich bei einer Powerbank), aber da der Betriebsstrom aus dem Akku kommt, wird der Akku nie vollständig geladen.</p>
</div>
<div class="paragraph">
<p>Wenn beide Ladezustands-LEDs aufleuchten, wenn ein Ladekabel angeschlossen wird, ist wahrscheinlich die interne Verbindung zum Akku fehlerhaft.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="config">Konfigurieren des wiFred</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bevor Sie das Gerät verwenden können, muss es konfiguriert werden. Zumindest muss die wiFred-Hauptkonfigurationsseite <a href="#throttleConfMainPage">Screenshot der wiFred-Hauptkonfigurationsseite</a> einmal abgeschickt werden, um im nichtflüchtigen Speicher gespeichert zu werden. Wenn beim Start keine gültige Konfiguration erkannt wird, startet das Gerät mit einer Standardkonfiguration ohne aktivierte Loks und ohne WLAN-Einstellungen, sodass es keine Verbindung zu einem WLAN-Netzwerk herstellen kann.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
Nach Eingabe jeglicher Art von Text (Namen, Zahlen&#8230;&#8203;) in Textfelder muss der entsprechende "Speichern"-Button gedrückt werden, um die Änderungen an den wiFred zu übermitteln.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_wechseln_in_den_konfigurationsmodus">Wechseln in den Konfigurationsmodus</h3>
<div class="paragraph">
<p>Es gibt vier Möglichkeiten, in den Konfigurationsmodus zu wechseln:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Schalten Sie die Drehregler ein / wählen Sie eine Lok, wenn das konfigurierte WLAN-Netzwerk nicht in Reichweite ist (oder wenn keine gültige Konfiguration vorhanden ist - der erste Start einer neuen Drehregler fällt in diese Kategorie)</p>
</li>
<li>
<p>Schalten Sie die Drehregler ein / wählen Sie eine Lok aus, während Sie fünf Sekunden lang die SHIFT-Taste gedrückt halten<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
<li>
<p>Drücken Sie die SHIFT-Taste und ESTOP zusammen, wenn die Drehregler angeschlossen ist</p>
</li>
<li>
<p>Drücken Sie F0 für fünf Sekunden, während / nachdem das Gerät mit einem WLAN-Netzwerk verbunden ist<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In den ersten beiden Fällen erstellt die Drosselung ein drahtloses Netzwerk mit dem Namen wiFred-config plus vier Hex-Ziffern, die von der MAC-Adresse der Drosselklappen-WLAN-Schnittstelle stammen, z. B. wiFred-config0CAC, und kündigt seine Anwesenheit unter dem Namen config.local an sowie die Erstellung eines Captive-Portals an. Jedes WIFi-Gerät mit einem Webbrowser kann eine Verbindung zu diesem Netzwerk herstellen und einen Webbrowser öffnen und <a href="http://192.168.4.1" class="bare">http://192.168.4.1</a> oder <a href="http://config.local" class="bare">http://config.local</a> zu öffnen.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Dies wurde mit Mozilla Firefox und Opera unter Linux mit Avahi (einer Zeroconf-Implementierung), FOSS Browser auf Android 9/10 und Safari auf iOS 13/14 getestet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Im dritten und vierten Fall kündigt der Handregler seine Anwesenheit nur unter dem Namen config.local unter Verwendung des Bonjour/Zeroconf-Protokolls. Jedes Gerät im selben WLAN-Netzwerk mit Bonjour/Zeroconf kann über einen Webbrowser auf die Konfiguration unter <a href="http://config.local" class="bare">http://config.local</a> zugreifen. Unter <a href="#configurationComputer">Computer oder Smartphone zur Konfiguration von wiFred</a> finden Sie eine Erläuterung, was erforderlich ist, damit Ihr Gerät Bonjour/Zeroconf-Ankündigungen liest.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Ist die IP-Adresse oder der Name der Drehregler im Normalbetrieb bekannt, können die Konfigurationsseiten auch jederzeit während der Verbindung durch Verweisen eines Webbrowsers aufgerufen werden. Dies ist meist ungetestet und daher nicht zu empfehlen, während die Drehregler Loks läuft.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Dies wurde mit Mozilla Firefox und Opera unter Linux mit Avahi (einer Zeroconf-Implementierung) und BonjourBrowser auf Android 10 getestet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#throttleConfMainPage">Screenshot der wiFred-Hauptkonfigurationsseite</a> zeigt die erste Seite, die Sie sehen, wenn Sie einen Webbrowser auf Ihren wiFred-Drehregler richten. Es ist in mehrere Abschnitte unterteilt, die in den folgenden Kapiteln erläutert werden.</p>
</div>
<div id="throttleConfMainPage" class="imageblock">
<div class="content">
<img src="images/wiFred_configuration_page.png" alt="wiFred main configuration page">
</div>
<div class="title">Figure 2. Screenshot der wiFred-Hauptkonfigurationsseite</div>
</div>
</div>
<div class="sect2">
<h3 id="_allgemeine_konfiguration">Allgemeine Konfiguration</h3>
<div class="paragraph">
<p>Im Abschnitt "General Configuration" gibt es nur eine Konfigurationsoption: Den Drosselklappennamen. Dies ist eine Freiform-Identifikationszeichenfolge der Drosselklappe. Es wird im wiThrottle-Fenster von JMRI angezeigt, wie in  <a href="#withrottleScreenshot">Screenshot des wiThrottle-Bildschirms mit einem angeschlossenen Handregler</a> gezeigt, der eine angeschlossene Drehregler zeigt, und kann verwendet werden, um die Drehregler während der Konfiguration zu identifizieren.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Der wiFred kündigt seine Präsenz im WiFi-Netzwerk auch über Bonjour / Zeroconf mit einer bereinigten Version des Namens an, d.h. ein Handregler namens "Heiko Prototype 2-2" wird seine Anwesenheit als heikoprototype22.local ankündigen, wenn er sich nicht im Konfigurationsmodus befindet.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_wlan_konfiguration">WLAN-Konfiguration</h3>
<div class="paragraph">
<p>Der Abschnitt "WiFi configuration" zeigt eine Liste der konfigurierten WLAN-Netzwerke. Der wiFred stellt eine Verbindung zu einem Netzwerk in dieser Liste her. Wenn mehrere konfigurierte Netzwerke in Reichweite sind, wählt er das stärkste aus.</p>
</div>
<div class="paragraph">
<p>Vorhandene Einträge können durch Klicken auf die Schaltfläche "Remove SSID" in der Zeile des Netzwerks, das entfernt werden soll, entfernt werden.</p>
</div>
<div class="paragraph">
<p>Neue Einträge können entweder durch manuelle Eingabe der SSID und PSK<sup class="footnote" id="_footnote_PSK">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> bei Bedarf und Klick auf die Schaltfläche "Manually add network" oder durch Klicken auf den Link "Scan for networks" hinzugefügt werden, der den Benutzer auf die in <a href="#throttleConfWiFiPage">Screenshot der wiFred "Scan for networks"-Seite</a> gezeigte Seite führt.</p>
</div>
<div id="throttleConfWiFiPage" class="imageblock">
<div class="content">
<img src="images/wiFred_wifi-scan_page.png" alt="Scan for networks Seite">
</div>
<div class="title">Figure 3. Screenshot der wiFred "Scan for networks"-Seite</div>
</div>
<div class="paragraph">
<p>Das Laden dieser Seite dauert einige Sekunden, da der Scan nach Netzwerken zuerst abgeschlossen werden muss. Es zeigt alle Netzwerke an, die während des Scans gefunden wurden. Netzwerke können der Liste hinzugefügt werden, indem Sie auf die Schaltfläche "Add network" klicken, nachdem Sie das PSK<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> in das Feld daneben eingegeben haben.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Der wiFred unterstützt WPS nicht und akzeptiert nicht mehrere Netzwerke mit derselben SSID, aber unterschiedlichen PSKs. Weitere Details zu den Netzwerkanforderungen finden Sie unter <a href="#serverSetup">Optionen für die Servereinrichtung</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die neue WLAN-Konfiguration wird erst aktiviert, wenn der wiFred neu gestartet wird, entweder durch einen Aus- und Einschaltvorgang oder durch Klicken auf den Link "Restart wiFred to enable new WiFi-settings" auf der Konfigurationsseite.</p>
</div>
</div>
<div class="sect2">
<h3 id="_lok_server_konfiguration">Lok-Server-Konfiguration</h3>
<div class="paragraph">
<p>Im Anschluss an die WLAN-Konfiguration ermöglicht der Abschnitt "Loco server configuration" die Konfiguration des wiThrottle-Servers, mit dem sich der wiFred verbinden soll. Die Standardeinstellung - Server automatisch erkennen - funktioniert gut, wenn nur ein wiThrottle-Server im Netzwerk vorhanden ist. Es verbindet sich mit jedem Server, der seine Anwesenheit auf Port 12090 über Zeroconf / Bonjour ankündigt. Das Ergebnis der Zeroconf / Bonjour-Suche wird hier angezeigt, wenn der wiFred automatisch einen Server entdeckt hat.</p>
</div>
</div>
<div class="sect2">
<h3 id="throttle_LocoConf">Loco configuration</h3>
<div class="paragraph">
<p>Nach der "Lokserverkonfiguration" sind den vier verschiedenen Lokomotiven vier identische Abschnitte zugeordnet, die mit diesem Handregler gesteuert werden können. Jeder Abschnitt besteht aus den folgenden Einstellungen:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">DCC address</dt>
<dd>
<p>Kann eine kurze Adresse zwischen 1 und 127 (auch für besteht verwendet) oder eine lange Adresse zwischen 0 und 10239 sein.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Kurze Adressen zwischen 1 und 127 sind nicht dasselbe wie lange Adressen zwischen 1 und 127, und viele DCC-Systeme unterstützen nicht alle diese Adressen.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ist diese auf -1 gesetzt, ist die entsprechende Lok deaktiviert.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Long address?</dt>
<dd>
<p>Kontrollkästchen, um das Verhalten des oben beschriebenen DCC-Adresseingabefeldes zu ändern.</p>
</dd>
<dt class="hdlist1">Direction</dt>
<dd>
<p>Dies hat drei Möglichkeiten:</p>
<div class="ulist">
<ul>
<li>
<p>Normal: Lok fährt vorwärts, wenn wiFred auf vorwärts eingestellt ist und umgekehrt</p>
</li>
<li>
<p>Reverse: Lok fährt rückwärts, wenn wiFred auf vorwärts eingestellt ist und umgekehrt</p>
</li>
<li>
<p>Don&#8217;t change: Die Lok fährt weiterhin in die gleiche Richtung, in die sie bei der Aktivierung eingestellt wurde, und wechselt die Richtung, wenn die wiFred die Richtung wechselt</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Function mapping</dt>
<dd>
<p>Link zur Funktionsmapping-Unterseite für die entsprechende Lok, wie unter <a href="#throttle_FunctionConf">Konfiguration der DCC-Funktion</a> beschrieben. Wenn Sie auf diesen Link klicken, gehen alle auf der aktuellen Seite eingegebenen Informationen verloren und der Webbrowser gelangt auf eine andere Unterseite.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
Erinnerung: Änderungen werden über die Schaltfläche "Save loco config" gespeichert, die in verschiedenen Webbrowsern unterschiedlich aussehen kann (Firefox gezeigt).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="throttle_FunctionConf">Konfiguration der DCC-Funktion</h3>
<div class="paragraph">
<p>Wenn eine Funktionstaste gedrückt wird, sendet die Drehregler standardmäßig die entsprechenden Befehle an jede unter Kontrolle befindliche Lok. Unter Umständen ist dies nicht erwünscht - das naheliegende Beispiel ist eine Lok in der Mitte einer Multieinheit, die kein Spitzenicht haben sollte. So bietet diese Seite - gezeigt in <a href="#throttleConfigFunctionPage">Screenshot der Konfigurationsseite für die WiFred-Funktionszuordnung</a> - die Möglichkeit, zwischen verschiedenen Einstellungen für jede Funktion an jeder der vier Lokomotiven (eine Seite pro Lokomotive) zu wählen:</p>
</div>
<div id="throttleConfigFunctionPage" class="imageblock">
<div class="content">
<img src="images/wiFred_function_page.png" alt="wiFred function page">
</div>
<div class="title">Figure 4. Screenshot der Konfigurationsseite für die WiFred-Funktionszuordnung</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Throttle controlled</dt>
<dd>
<p>Wenn die erste Lok durch Bewegen des Auswahlschalters an die "ausgewählte" Position aktiviert wird, wird der aktuelle Status der Funktion abgefragt und gespeichert. Bei der Auswahl der nächsten Lok wird der Funktionsstatus auf den gleichen stellen. Anschließend werden Tastendrücke an die Lok durchgereicht. Ob die Funktion tastend<sup class="footnote" id="_footnote_MOM">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup> oder rastend<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup> sein wird, wird vom Server bestimmt, im Falle von JMRI durch den Roster-Eintrag.</p>
</dd>
<dt class="hdlist1">Throttle controlled, force momentary</dt>
<dd>
<p>Die Funktionstaste wird als tastende Funktion<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup> an die Lok durchgereicht.</p>
</dd>
<dt class="hdlist1">Throttle controlled, force locking</dt>
<dd>
<p>Wie für <strong>Throttle controlled</strong> beschrieben, wird die Funktion jedoch unabhängig von den Servereinstellungen als rastend festgelegt<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p>
</dd>
<dt class="hdlist1">Throttle controlled if this is the only loco</dt>
<dd>
<p>Wie für <strong>Throttle controlled, force locking</strong> beschrieben, aber die Funktionstaste wird die Funktion nur umschalten, wenn keine andere Lok aktiviert ist. Dies ermöglicht z.B. das Ein- und Ausschalten von Spitzenlicht und Rücklicht an einzelnen Loks vor dem Zusammenkoppeln einer Mehrfachtraktion.</p>
</dd>
<dt class="hdlist1">Force function always on</dt>
<dd>
<p>Die Funktion wird bei Aktivierung der Lok eingeschaltet und bleibt unabhängig von Tastendrücken eingeschaltet<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>.</p>
</dd>
<dt class="hdlist1">Force function always off</dt>
<dd>
<p>Die Funktion wird bei Aktivierung der Lok abgeschaltet und bleibt unabhängig von Tastendrücken ausgeschaltet.</p>
</dd>
<dt class="hdlist1">Ignore function key</dt>
<dd>
<p>Es werden keine Funktionsbefehle an diese Lok gesendet.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
Erinnerung: Änderungen werden über die Schaltfläche "Save function configuration" gespeichert, die in verschiedenen Webbrowsern unterschiedlich aussehen kann (Firefox gezeigt).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_wifred_status">wiFred-Status</h3>
<div class="paragraph">
<p>Der Abschnitt "wiFred status" zeigt die aktuelle Batteriespannung, gemessen am wiFred. Dies wird beim erneuten Laden der Seite aktualisiert, nicht kontinuierlich.</p>
</div>
<div class="paragraph">
<p>Es zeigt auch die aktuelle Firmware-Version(en).</p>
</div>
</div>
<div class="sect2">
<h3 id="_wifred_system">wiFred-System</h3>
<div class="paragraph">
<p>Im Abschnitt wiFred system können diverse Einstellungen zur Hardware des wiFred angepasst werden.</p>
</div>
<div class="paragraph">
<p>Die erste Einstellung betrifft wiFreds, die einen Fahrtrichtungsumschalter mit Mittelstellung haben, und bestimmt, welche Befehle der wiFred bei Mittelstellung sendet. Die Optionen sind:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ignore</dt>
<dd>
<p>Behält die Fahrtrichtung bei, die der wiFred vor dem Umschalten in Mittelstellung hatte. Die Geschwindigkeit wird weiterhin durch das Potentiometer bestimmt. Eine vollständige Fahrtrichtungsumkehr löst einen Not-Halt aus.</p>
</dd>
<dt class="hdlist1">Zero Speed</dt>
<dd>
<p>Behält die Fahrtrichtung bei, sendet aber Fahrstufe Null an alle Loks. Diese Einstellung ist für Loks gedacht, die auf hohe Anfahr- und Bremsverzögerung eingestellt sind. Wenn die Fahrtrichtung in weniger als einer halben Sekunde vollständig umgeschaltet wird, löst der wiFred einen Not-Halt aus, sonst beschleunigen die Loks in der neuen Fahrtrichtung wieder auf die eingestellte Geschwindigkeit.<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup></p>
</dd>
<dt class="hdlist1">Set F&lt;n&gt;</dt>
<dd>
<p>Simuliert die Betätigung der eingestellten Funktionstaste beim Umschalten von Vorwärts auf Mittelstellung und erneut beim Umschalten von Mittelstellung auf Rückwärts (und umgekehrt). Diese Einstellung ist für Loks gedacht, die auf einer Funktionstaste eine Bremsfunktion oder ESUs Drive Hold haben. Die an die Loks gesendete Geschwindigkeit wird weiterhin durch das Potentiometer bestimmt, solange der Fahrtrichtungsumschalter in Mittelstellung liegt. Wenn die Fahrtrichtung in weniger als einer halben Sekunde vollständig umgeschaltet wird, löst der wiFred einen Not-Halt aus, sonst sendet der wiFred weiterhin die am Potentiometer eingestellte Geschwindigkeit an die Loks.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Der Abschnitt schließt mit zwei Links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reset wiFred to factory defaults - der zu einer Bestätigungsseite führt, die in <a href="#throttleConfResetPage">Screenshot der wiFred-Konfigurationsrücksetzungsseite</a> angezeigt wird, um alle Konfigurationsdaten auf die Werkseinstellungen wie bei einem neuen wiFred zurückzusetzen.</p>
</li>
<li>
<p>Update wiFred firmware - der zu einer Firmware-Update-Seite führt, die in <a href="#throttleConfUpdatePage">Screenshot der wiFred-Firmware-Update-Seite</a>  angezeigt wird, um die wiFred-Firmware des ESP8266 / ESP32-S2 zu aktualisieren. Suchen Sie die .bin-Datei aus dem arduino-Build-Ordner oder aus dem [Github-Repository für wiFred], klicken Sie auf "Durchsuchen", navigieren Sie zur .bin-Datei und starten Sie schließlich das Update mit einem Klick auf "Update Firmware" - was eine Weile dauern wird.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Es kann erforderlich sein, den wiFred vollständig auszuschalten, damit er nach einem Firmware-Update ordnungsgemäß neu gestartet werden kann.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Bei einer wiFred-Version ab 0.6 mit ESP32-S2 MCU kann das Zurücksetzen auf die Werkseinstellungen auch durch Fünf-Sekunden-Halten der ESTOP-Taste beim Start erfolgen.
</td>
</tr>
</table>
</div>
<div id="throttleConfResetPage" class="imageblock">
<div class="content">
<img src="images/wiFred_reset_page.png" alt="wiFred-Konfigurationsrücksetzungsseite">
</div>
<div class="title">Figure 5. Screenshot der wiFred-Konfigurationsrücksetzungsseite</div>
</div>
<div id="throttleConfUpdatePage" class="imageblock">
<div class="content">
<img src="images/wiFred_update_page.png" alt="wiFred-Firmware-Update-Seite">
</div>
<div class="title">Figure 6. Screenshot der wiFred-Firmware-Update-Seite</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serverSetup">Optionen für die Servereinrichtung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_komponenten_die_zum_betrieb_des_wifred_erforderlich_sind">Komponenten, die zum Betrieb des wiFred erforderlich sind</h3>
<div id="withrottleScreenshot" class="imageblock">
<div class="content">
<img src="images/withrottle_Screenshot.jpg" alt="wiThrottle Bildschirm">
</div>
<div class="title">Figure 7. Screenshot des wiThrottle-Bildschirms mit einem angeschlossenen Handregler</div>
</div>
<div class="paragraph">
<p><a href="#runningTrains">Infrastruktur zum Betrieb von Loks mit dem wiFred</a> zeigt die Verbindungen zwischen den Geräten, die für den Betrieb von Zügen mit dem wiFred erforderlich sind.</p>
</div>
<div id="runningTrains" class="imageblock">
<div class="content">
<img src="images/runningTrains.png" alt="Infrastruktur zum Betrieb von Loks mit dem wiFred">
</div>
<div class="title">Figure 8. Infrastruktur zum Betrieb von Loks mit dem wiFred</div>
</div>
<div class="paragraph">
<p>Die Symbole in <a href="#runningTrains">Infrastruktur zum Betrieb von Loks mit dem wiFred</a> symbolisieren die folgenden Teile:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ein IEEE 802.11b/g/n 2,4 GHz WiFi Access Point, der ausführlich unter <a href="#serverWiFi">Anforderungen an WLAN Access Points</a>  beschrieben wird</p>
</li>
<li>
<p>Ein PC oder Laptop mit Windows, Linux oder MacOS zum Ausführen des JMRI-Servers, der in den <a href="#serverJMRI">JMRI-Serveranforderungen</a> ausführlich beschrieben ist</p>
</li>
<li>
<p>Eine Möglichkeit, den JMRI-Server mit dem Modelleisenbahnlayout zu verbinden, das unter <a href="#serverLayoutConn">Layout-Verbindungsoptionen</a> ausführlich beschrieben wird</p>
</li>
<li>
<p>Ein Gerät mit einem Webbrowser, das mit demselben Netzwerk wie der wiFred verbunden ist, um den wiFred zu konfigurieren - kann das gleiche physische Gerät wie dasjenige sein, auf dem der Server ausgeführt wird, wenn es die Anforderungen in <a href="#configurationComputer">Computer oder Smartphone zur Konfiguration von wiFred</a> erfüllt</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In den folgenden Abschnitten werden mehrere Optionen für jeden Schritt oder die Kombination dieser Schritte beschrieben.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Grundsätzlich gilt: Wenn ein Layout so eingerichtet ist, dass Züge mit einem Smartphone mit wiThrottle oder EngineDriver gesteuert werden können, sollte ein wiFred ohne Änderungen an der Layoutkonfiguration funktionieren. Wenn ein Layout so eingerichtet ist, dass Züge von einem JMRI-Fahrregler auf einem Computer gesteuert werden können, muss nur eine WLAN-Verbindung zum JMRI-Computer hinzugefügt werden.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_sofort_einsatzbereite_serverseitige_optionen">Sofort einsatzbereite serverseitige Optionen</h3>
<div class="paragraph">
<p>Eine ziemlich out-of-the-box-Lösung für einen Raspberry Pi wird von <a href="#rpiImage">[Steve Todd]</a> bereitgestellt, der sein eigenes WiFi-Netzwerk erstellt, automatisch mehrere Optionen für die Schnittstelle zu einem DCC-Layout erkennt und einen wiThrottle-Server startet. Es wurde in den Versionen JMRI 4.16 und JMRI 4.20 getestet, um mit dem wiFred zu arbeiten und sowohl über einen RRCircuits LocoBuffer USB als auch über einen Digitrax PR3 über Loconet mit einem Z21 black verbunden zu werden.</p>
</div>
<div class="paragraph">
<p>Obwohl bisher ungetestet, sollte das Hinzufügen eines <a href="#Digitrax">[Digitrax LNWI]</a> zu einem Digitrax-System oder eines <a href="#MRC">[MRC Prodigy WiFi]</a> zu einem MRC-System es dem wiFred ermöglichen, auch Loks out-of-the-box zu steuern.</p>
</div>
</div>
<div class="sect2">
<h3 id="windowsWiFi">Schritt-für-Schritt-Anleitung für einen Windows-Computer-Hotspot</h3>
<div class="paragraph">
<p>Dies wurde auf einem Windows 7 64Bit Laptop-Computer mit einer 2,4 GHz WiFi-Karte im PC getestet.</p>
</div>
<div class="sect3">
<h4 id="_installation">Installation</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Installieren Sie <a href="https://www.nirsoft.net/utils/wifi_hotspot_starter.html">HostedNetworkStarter</a></p>
</li>
<li>
<p>Installieren Sie <a href="https://www.dhcpserver.de/cms/download/">DHCP server</a> - laden Sie alle Dateien aus der ZIP-Datei herunter und extrahieren Sie sie an einen Ort auf Ihrer Festplatte, z. B. C:\DHCPServer</p>
</li>
<li>
<p>Installieren Sie ein JDK, Version 8 und 11 wurden getestet. Beispiel: <a href="https://adoptopenjdk.net/releases.html">Version OpenJDK 11 (LTS), JVM HotSpot</a>  Wählen Sie die 64-Bit-Version für die meisten modernen Hardware, 32-Bit nur, wenn Sie ein 32-Bit-Betriebssystem verwenden. Einfachste Option: MSI-Datei, Download und Installation.</p>
</li>
<li>
<p>Installieren Sie <a href="https://www.jmri.org">JMRI</a> - Versionen, die für die Ausführung mit dem wiFred getestet wurden, umfassen 4.14, 4.16, 4.18 und 4.20. Neueste Produktionsversion empfohlen.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Windows 10 bietet eine Hotspot-Funktion, die anstelle von HostedNetworkStarter und DHCP-Server funktioniert, sodass Sie direkt in die Installation von JDK und JMRI einsteigen können.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_konfiguration">Konfiguration</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Starten Sie HostedNetworkStarter über das Startmenü, geben Sie einen Netzwerknamen und einen Netzwerkschlüssel ein und klicken Sie dann auf die Schaltfläche Start. Notieren Sie sich den "Namen der gehosteten Netzwerkverbindung" für den nächsten Schritt</p>
</li>
<li>
<p>Starten Sie den DHCP-Server-Assistenten von C:\DHCPServer\dhcpwiz.exe, wählen Sie das Netzwerk mit dem Namen aus, der mit dem "Host Network Connection Name" aus dem Schritt zuvor identisch ist, klicken Sie einige Male auf "Next" (Deaktivieren Sie die Auswahl aller zusätzlichen unterstützten Protokolle), Schreiben Sie in die INI-Datei, starten Sie den Dienst und konfigurieren Sie Firewall-Ausnahmen</p>
</li>
<li>
<p>Starten Sie JMRI mit dem DecoderPro-Symbol auf dem Desktop, richten Sie Ihre Layoutverbindung ein, testen Sie, ob Sie eine Lok mit einer JMRI-Drehregler ausführen können</p>
</li>
<li>
<p>Starten Sie in JMRI den WiThrottle Server über das Menü Aktionen. Wenn ein Firewall-Popup angezeigt wird, lassen Sie alle zu.</p>
</li>
<li>
<p>Bearbeiten Sie in JMRI die Einstellungen aus dem Menü Bearbeiten, wählen Sie WiThrottle im linken Bereich und klicken Sie auf das Kontrollkästchen "Automatisch mit Anwendung starten". Alle zulässigen Steuerelemente können deaktiviert werden.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_betrieb">Betrieb</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Starten Sie HostedNetworkStarter über das Startmenü, geben Sie einen Netzwerknamen und einen Netzwerkschlüssel ein und klicken Sie dann auf die Schaltfläche Start.</p>
</li>
<li>
<p>Starten Sie JMRI mit dem DecoderPro-Symbol auf dem Desktop</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="serverWiFi">Anforderungen an WLAN Access Points</h3>
<div class="paragraph">
<p>Der wiFred funktioniert im Grunde auf jedem 2,4 GHz IEEE802.11b oder -g WiFi-Netzwerk, das neue Geräte akzeptiert und ihnen eine IPv4-Adresse über einen DHCP-Server zur Verfügung stellt. Es unterstützt offene Netzwerke oder WPA2-Verschlüsselung, jedoch nicht WPS.</p>
</div>
<div class="paragraph">
<p>Es wurde erfolgreich getestet mit einer FRITZ!Box, einem unbekannten Kabelrouter, mehreren öffentlichen WLAN-Netzwerken und mehreren Software-Hotspots einschließlich Linux hostapd sowohl auf einem Intel Atom Netbook der ersten Generation als auch auf einem Raspberry Pi, dem Windows 10 Hotspot und einer Windows 7 Software, wie in #serverWiFi beschrieben.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Einige WLAN-Zugangspunkte und Router bieten eine Funktion namens "Wireless Isolation" oder ähnliches, die es verbundenen Geräten verbietet, sich miteinander zu verbinden. Diese Funktion sollte deaktiviert werden, damit wiFreds ihren Server finden und konfiguriert werden können.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="serverJMRI">JMRI-Serveranforderungen</h3>
<div class="paragraph">
<p>Jeder PC, auf dem mindestens Java 8 ausgeführt werden kann, kann den JMRI-Server ausführen. Selbst alte 32Bit Netbook-Computer der ersten Generation wie der 2008 Eee-PC haben mehr als genug Rechenleistung für diese Aufgabe. Es gibt JMRI-Versionen für Windows, Linux oder MacOS, daher sollte jedes dieser Betriebssysteme in Ordnung sein.</p>
</div>
</div>
<div class="sect2">
<h3 id="serverLayoutConn">Layout-Verbindungsoptionen</h3>
<div class="paragraph">
<p><a href="#JMRI">[JMRI]</a> unterstützt eine Vielzahl unterschiedlicher Verbindungen zum Layout, wie unter <a href="#jmrihardwaresupport">[Supported Hardware]</a> beschrieben. Im Allgemeinen, wenn eine JMRI-Installation eine Lok auf dem Layout ausführen kann, ist es eine einfache Angelegenheit, den JMRI-Computer mit einem WLAN-Zugangspunkt zu verbinden (falls nicht bereits verbunden) und den wiThrottle-Server über das Aktionsmenü in DecoderPro zu starten.</p>
</div>
<div class="paragraph">
<p>Der wiFred wurde getestet mit einem LocoBufferUSB oder einem Digitrax PR3, die jeweils über Loconet mit einer Intellibox, einer Z21 black, einer DCS 51 Zephyr xtra oder einer Minibox 2 DIY DCC Zentrale verbunden ist. Es wurde auch verwendet, um eine Lok auf einem SPROG-Programmierer zu betreiben.</p>
</div>
</div>
<div class="sect2">
<h3 id="configurationComputer">Computer oder Smartphone zur Konfiguration von wiFred</h3>
<div class="paragraph">
<p>Webbrowser, Zeroconf. Avahi. Bonjour (iTunes?). MacOS out of the box?
iOS? Android?</p>
</div>
<div class="paragraph">
<p>Für die Erstkonfiguration des wiFred können die meisten der oben genannten Geräte entfallen. Wie in <a href="#confWifred">Für die Erstkonfiguration sind die Anforderungen sehr gering</a> gezeigt wird nur ein WLAN-fähiges Gerät mit einem Webbrowser benötigt.</p>
</div>
<div id="confWifred" class="imageblock">
<div class="content">
<img src="images/configuringWifred.png" alt="wiFred-Erstkonfiguration">
</div>
<div class="title">Figure 9. Für die Erstkonfiguration sind die Anforderungen sehr gering</div>
</div>
<div class="paragraph">
<p>Getestet mit iOS 13 und iOS 14, Android 9 und 10 sowie Firefox unter Linux wird die Erstkonfigurationsseite automatisch geladen, wenn das Gerät mit dem wiFred-configXXXX-Netzwerk verbunden ist.</p>
</div>
<div class="paragraph">
<p>Für die reguläre Konfiguration ist Bonjour/Zeroconf/mDNS-Unterstützung erforderlich, sobald der wiFred erfolgreich eine Verbindung zu einem WLAN-Netzwerk hergestellt und in den Konfigurationsmodus versetzt wurde, um das Gerät zu finden, das sich selbst als <a href="http://config.local" class="bare">http://config.local</a> ankündigt. Dieser Dienst wird unter Linux von einem Softwarepaket namens avahi bereitgestellt, sollte auf iOS und MacOS sofort funktionieren und kann unter Windows mit iTunes installiert werden. Für mobile Betriebssysteme gibt es Apps namens Discovery für iOS und BonjourBrowser für Android, die nicht nur <a href="http://config.local" class="bare">http://config.local</a> übersetzen, um auf die Konfigurationswebsite des im Netzwerk zu verweisen, der sich im Konfigurationsmodus befindet, sondern auch alle wiFreds durchsuchen, die derzeit ihre Anwesenheit ankündigen. <a href="#bonjourBrowser">Benutzeroberfläche von BonjourBrowser, die zwei im Netzwerk aktive wiFreds anzeigt.</a> zeigt einen Screenshot der Android-Version. Wenn Sie auf ein Gerät klicken, wird ein Browser zu seiner Konfigurationswebsite geöffnet.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
Die Konfiguration eines wiFred, ohne ihn zuerst in den Konfigurationsmodus zu versetzen, ist weitgehend ungetestet und kann zu unerwünschten Ergebnissen führen, insbesondere wenn Sie gleichzeitig einen Zug damit betreiben.
</td>
</tr>
</table>
</div>
<div id="bonjourBrowser" class="imageblock">
<div class="content">
<img src="images/bonjourBrowser.png" alt="BonjourBrowser mit zwei wiFreds" width="50%">
</div>
<div class="title">Figure 10. Benutzeroberfläche von BonjourBrowser, die zwei im Netzwerk aktive wiFreds anzeigt.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hardware_beschreibung">Hardware-Beschreibung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ab_revision_0_6">Ab Revision 0.6</h3>
<div class="paragraph">
<p>Die wiFred-Hardware ist um ein ESP32-S2-WROOM-Modul zentriert, das die LEDs steuert und die Schalter, Drucktasten und Das Geschwindigkeitspotentiometer ausliest. Es erhält seine Energie von einer Einzelzellen-LiPo-Batterie über einen linearen 3,3-V-Spannungsregler, der direkt von den Lokwahlschaltern aktiviert wird, die durch einen Satz von Dioden logisch verbunden werden. Ein RC-Tiefpass verzögert das Ausschalten des wiFred um ein paar Sekunden.</p>
</div>
<div class="paragraph">
<p>Optional können zwei weiße 5 mm-LEDs, die aus der Oberseite der Leiterplatte herausragen, als Taschenlampe installiert werden. Sie werden von einer Konstantstromquelle direkt aus dem Akku angetrieben und beim Drücken der gelben SHIFT-Taste aktiviert.</p>
</div>
<div class="paragraph">
<p>Der ESP32-S2 überwacht auch die Batteriespannung und wechselt in den Ruhezustand, wenn die Batteriespannung zu niedrig abfällt. Dies sollte den Stromverbrauch auf einen einigermaßen sicheren Wert senken, auch wenn er nicht so niedrig ist, wie er sein kann, wenn alle Lokauswahlschalter ausgeschaltet sind. Das Aufladen des Akkus kann über den integrierten USB-Anschluss erfolgen, wobei zwei LEDs den Ladestatus anzeigen.</p>
</div>
<div class="paragraph">
<p>Der Schaltplan ist in mehrere Seiten aufgeteilt und wird in <a href="#schematic06page1">Schaltplanseite mit Batterieanschluss, Ladeschaltung und Netzteil</a> bis <a href="#schematic06page3">Schaltplanseite für Benutzeroberfläche (Taster, Schalter, LEDs, Poti und Taschenlampe)</a> gezeigt. Er wurde mit kicad erstellt und ist zusammen mit dem PCB-Design im <a href="#github">[Github repository für wiFred]</a> verfügbar.</p>
</div>
<div id="schematic06page1" class="imageblock">
<div class="content">
<img src="images/wfred_rev6.png" alt="&quot;Schematic sheet 1 for rev0.6">
</div>
<div class="title">Figure 11. Schaltplanseite mit Batterieanschluss, Ladeschaltung und Netzteil</div>
</div>
<div id="schematic06page2" class="imageblock">
<div class="content">
<img src="images/wfred-wifi_rev6-Wifi_connection.png" alt="&quot;Schematic sheet 2 for rev0.6">
</div>
<div class="title">Figure 12. Schaltplanseite mit ESP32-S2-WROOM für WLAN-Verbindung, mit Bootloader-Jumper und Verbindung zum Programmierkabel</div>
</div>
<div id="schematic06page3" class="imageblock">
<div class="content">
<img src="images/User_interface_rev6-User_Interface.png" alt="&quot;Schematic sheet 3 for rev0.6">
</div>
<div class="title">Figure 13. Schaltplanseite für Benutzeroberfläche (Taster, Schalter, LEDs, Poti und Taschenlampe)</div>
</div>
</div>
<div class="sect2">
<h3 id="_schreiben_der_firmware_auf_den_esp32_s2_wroom">Schreiben der Firmware auf den ESP32-S2-WROOM</h3>
<div class="paragraph">
<p>Um den ESP32-S2 in den Firmware-Flashing-Modus zu versetzen, muss vor dem Einschalten ein Jumper auf den BOOT-Pins installiert werden, wie in <a href="#bootJumper06">Position des Boot-Jumpers - links vom 0.6 Prototyp, rechts von 0.62 Rendering</a> gezeigt. Nach dem Eintritt in den Bootloader registriert sich der ESP32-S2 als USB-CDC-Gerät, wenn er an einen PC angeschlossen ist, und kann über diesen programmiert werden. Alternativ kann die serielle Schnittstelle an den TXD/RXD-Pins verwendet werden. Die serielle Schnittstelle muss mit 3,3 V-Pegel arbeiten, wie von einem FTDI232-Gerät, das mit 3,3 V betrieben wird.</p>
</div>
<div id="bootJumper06" class="imageblock">
<div class="content">
<img src="images/wfred_rev62BootJumper.png" alt="Boot jumper for 0.6 wiFred">
</div>
<div class="title">Figure 14. Position des Boot-Jumpers - links vom 0.6 Prototyp, rechts von 0.62 Rendering</div>
</div>
<div class="paragraph">
<p>Alle Dateien im Unterverzeichnis software/esp-firmware des <a href="#github">[Github repository für wiFred]</a> müssen in einem Ordner abgelegt werden, dann muss die Hauptskizze esp-firmware.ino mit der Arduino IDE geöffnet werden. Die Einstellungen für die Arduino IDE finden Sie in der Hauptdatei, die Programmierung des Geräts sollte über die Schaltfläche Hochladen im Sketch-Menü funktionieren. Eine alternative Lösung mit einer vorkompilierten Firmware und esptool.py kann in Zukunft dokumentiert werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tipps_zum_aufbau_der_revision_0_6">Tipps zum Aufbau der Revision 0.6</h3>
<div class="paragraph">
<p>Alle SMD-Teile und Steckverbinder in <a href="#BOM06SMD">Liste der Komponenten auf der Unterseite - SMDs und Stiftleisten - für den wiFred ab revision 0.6</a> befinden sich auf der Unterseite, so dass sie einfach von einem automatisierten PCB-Bestückungsservice installiert werden können. Gerber-Dateien und Speicherortdateien werden im <a href="#github">[Github repository für wiFred]</a> zur Verfügung gestellt. Sie sind jedoch nicht kleiner als 0805, so dass es auch für erfahrene Elektronik-Hobbyisten möglich sein sollte, sie von Hand zu löten, obwohl der USB-C-Stecker einen sehr kleinen Pitch hat.</p>
</div>
<table id="BOM06SMD" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 3. Liste der Komponenten auf der Unterseite - SMDs und Stiftleisten - für den wiFred ab revision 0.6</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C106, C105</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22p</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C201, C302, C102, C203, C202, C104, C101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4u7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C303, C301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C308, C307, C306, C305, C103, C304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D103, D204, D203, D202, D201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BAT54C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23-5_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TP4054</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23-5_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XC6220B331MR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23-6_Handsoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAT4002ATD-GT3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">J101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB_C_Receptacle_HRO_TYPE-C-31-M-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB_C_Receptacle_USB2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">J301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PinHeader_2x03_P2.54mm_Vertical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conn_02x03_Odd_Even</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PinHeader_1x02_P2.54mm_Horizontal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BATT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R102, R101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22R</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R103, R209, R208, R207, R104</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">680R</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R105</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2k2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R107, R106</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5k1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R212, R302, R301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4M7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R303, R304, R206, R211, R205, R204, R203, R202, R201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R_0805_2012Metric_Pad1.15x1.40mm_HandSolder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4k7</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dann - wie <a href="#BOM06TOP">Liste der Komponenten auf der Oberseite - ESP32-S2-WROOM und Benutzerschnittstelle - für den wiFred ab revision 0.6</a> gezeigt - gibt es nur das ESP32-S2-WROOM-Modul auf der Oberseite der Leiterplatte und alle Schalter, Drucktasten, Potentiometer und LEDs. Nach der Installation des ESP32-S2-WROOM sollte der Richtungsschalter zuerst mit einer 8-mm-Sechskantmutter in die Leiterplatte geschraubt, dann mit den Abschnitten der LEDs an den Pads befestigt und das Geschwindigkeitspotentiometer mit einer 10-mm-Sechskantmutter in die Leiterplatte geschraubt werden, bevor die Leitungen gelöt werden.</p>
</div>
<div class="paragraph">
<p>Bei allen anderen Schaltern, Tastern und LEDs empfiehlt es sich, zuerst die Löcher in das Gehäuse zu bohren, dann die Teile auf die Leiterplatte zu legen und die Leiterplatte vor dem Löten der Teile in das Gehäuse zu schrauben. Löcher für die Tasterschalter sollten mit einem Durchmesser von 3,5 mm gebohrt werden. Löcher für die LEDs sollten bei 3 mm Durchmesser und Löcher für das Drehzahlpotentiometer bei 8 mm, für den Richtungsschalter bei 6,5 mm Durchmesser gebohrt werden. Die Ausschnitte für die Lokauswahlschalter werden am besten mit 1,5 mm gebohrt und mit einer Laubsäge oder einem scharfen Hobbymesser und einer Feile ausgearbeitet. Der einfachste Ansatz ist ein lasergraviertes Gehäuse - PDF- und DXF-Dateien der Markierungen sind auch im <a href="#github">[Github repository für wiFred]</a> verfügbar.</p>
</div>
<table id="BOM06TOP" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 4. Liste der Komponenten auf der Oberseite - ESP32-S2-WROOM und Benutzerschnittstelle - für den wiFred ab revision 0.6</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED - red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D205</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STOP - red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D206</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FORWARD - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D207</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REVERSE - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D208</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D5.0mm_Horicontal_FLIPPED_O1.27mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cree C543A-WMN-CCCKK141</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D209</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D5.0mm_Horizontal_O1.27mm_Z3.0mm_Clear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cree C543A-WMN-CCCKK141</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P160KNPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10k lin P160KNPD-4FC20B10K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW202</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW203</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESTOP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW205</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW206</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW207</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW208</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW209</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW210</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW211</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW212</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW213</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW214</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW215</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_PUSH_6mm_H9.5mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHIFT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW216</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100SP1T1B1M1QEH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIRECTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP32-S2-WROVER-HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP32-S2-WROOM</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Um eine vollständige Stückliste zu bilden, schließen Sie auch die <a href="#BOM06extra">Liste der Komponenten für die ab Revision 0.6 ohne elektronische Teile zum Löten auf Leiterplatte</a> aufgeführten Teile ein, die nicht auf die Leiterplatte gelötet, sondern später in der Montage verwendet werden.</p>
</div>
<table id="BOM06extra" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Liste der Komponenten für die ab Revision 0.6 ohne elektronische Teile zum Löten auf Leiterplatte</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Battery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lithium battery 1700mAh</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">H1a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Housing black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strapubox 2090</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or H1b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Housing white</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strapubox 2090</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">J1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jumper</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K1a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potentiometer Knob silver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or K1b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potentiometer Knob black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124mm x 35mm x 1.6mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1, S2, S3, S4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mounting Screws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,9mm x 6,5mm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nach der Bestückung der Leiterplatte mit allen Komponenten müssen die Löcher und Ausschnitte im Gehäuse höchstwahrscheinlich überarbeitet / verlängert werden, um tatsächlich zu der Leiterplatte zu passen. Dann kann die Leiterplatte mit vier Schrauben in das Gehäuse geschraubt werden. Danach sollte die Batterie an den BATT-Stecker angeschlossen werden. Dabei ist sicherzustellen, dass die Ausrichtung korrekt ist, wie in <a href="#battConnection06">Anschluss der Batterie an P101 ab Revision 0.6 - schwarzer Draht ist GND, roter Draht ist Plus</a> gezeigt und auf die Platine gedruckt. Der schwarze Draht ist GND, der rote Draht ist der positive. Dann sollte die Batterie mit doppelseitigem Klebeband auf die Unterseite des Gehäuses geklebt werden, damit sie nicht mit Teilen auf der Leiterplatte kollidiert. insbesondere den Stiftleisten und der Richtungsschalter.</p>
</div>
<div id="battConnection06" class="imageblock">
<div class="content">
<img src="images/DSC0779.jpg" alt="Battery connection">
</div>
<div class="title">Figure 15. Anschluss der Batterie an P101 ab Revision 0.6 - schwarzer Draht ist GND, roter Draht ist Plus</div>
</div>
<div id="drilljigPicture" class="imageblock">
<div class="content">
<img src="images/DSC0126.jpg" alt="Drilljig">
</div>
<div class="title">Figure 16. Verwendung der Originalplatine und der Bohrvorrichtung, um die Positionen der Löcher auf das Gehäuse zu übertragen - bessere Ergebnisse werden erzielt, wenn die Leiterplatten festgeschraubt werden</div>
</div>
<div id="battConnection" class="imageblock">
<div class="content">
<img src="images/DSC0148.jpg" alt="Battery connection">
</div>
<div class="title">Figure 17. Anschluss der Batterie an P101 auf Revision 0.4 - schwarzer Draht ist GND, roter Draht ist Plus</div>
</div>
</div>
<div class="sect2">
<h3 id="_bis_revision_0_5">Bis Revision 0.5</h3>
<div class="paragraph">
<p>Die wiFred-Hardware ist um einen ESP8266 für die WLAN-Verbindung zentriert. Der ESP8266 kommuniziert über seine serielle Schnittstelle mit einem ATMega 328P-Mikrocontroller, der die Stromversorgung verwaltet, die LEDs steuert, die Lokwahlschalter, das Drehzahlpotentiometer, den Richtungsschalter und die Drucktastenschalter für Funktionen und Not-Halt liest. Die Kommunikation erfolgt über einen 2x3-Pin-Header, der es dem Benutzer ermöglicht, ein Programmierkabel an dieselbe serielle Schnittstelle anzuschließen, wenn die Jumper entfernt werden.</p>
</div>
<div class="paragraph">
<p>Optional können zwei weiße 5 mm-LEDs, die aus der Oberseite der Leiterplatte herausragen, als Taschenlampe installiert werden. Sie werden von einer Konstantstromquelle direkt aus dem Akku betrieben und beim Drücken der gelben SHIFT-Taste aktiviert.</p>
</div>
<div class="paragraph">
<p>Der wiFred wird von einem Einzelzellen-LiPo-Akku angetrieben. Der ATMega 328P wird direkt an die LiPo-Zelle angeschlossen und wechselt in den Ruhezustand, wenn kein Lokwahlschalter aktiv ist, wodurch der Stromverbrauch auf weniger als 1 μA reduziert wird. Der ESP8266 wird von einem linearen Spannungsregler mit einer Ausgangsspannung von 3 V gespeist, der vom ATMega 328P deaktiviert wird, wenn das Gerät in den Standby-Modus wechselt.</p>
</div>
<div class="paragraph">
<p>Der Schaltplan ist in mehrere Seiten aufgeteilt und findet sich in <a href="#schematic05page1">Schaltplanseite mit Batterieanschluss, Ladeschaltung und Netzteil</a> bis <a href="#schematic05page4">Schaltplanseite mit Tastern, Lokwahlschaltern, Richtungsschalter, Drehzahlpotentiometer und Taschenlampen-LEDs mit Controller</a>. Er wurde mit kicad erstellt und ist zusammen mit dem PCB-Design im <a href="#github">[Github repository für wiFred]</a> verfügbar.</p>
</div>
<div id="schematic05page1" class="imageblock">
<div class="content">
<img src="images/wfred_rev2.png" alt="&quot;Schematic sheet 1 for rev0.5">
</div>
<div class="title">Figure 18. Schaltplanseite mit Batterieanschluss, Ladeschaltung und Netzteil</div>
</div>
<div id="schematic05page2" class="imageblock">
<div class="content">
<img src="images/wfred-wifi-Wifi_connection.png" alt="&quot;Schematic sheet 2 for rev0.5">
</div>
<div class="title">Figure 19. Schaltplanseite mit ESP8266 für WLAN-Verbindung mit Bootloader-Jumper und Verbindung zum Programmierkabel</div>
</div>
<div id="schematic05page3" class="imageblock">
<div class="content">
<img src="images/wfred-controller_rev2-Controller.png" alt="&quot;Schematic sheet 3 for rev0.5">
</div>
<div class="title">Figure 20. Schaltplanseite mit ATMega 328P zusammen mit Quartz und in ISP-Anschluss</div>
</div>
<div id="schematic05page4" class="imageblock">
<div class="content">
<img src="images/User_interface_rev2-User_Interface.png" alt="&quot;Schematic sheet 4 for rev0.5">
</div>
<div class="title">Figure 21. Schaltplanseite mit Tastern, Lokwahlschaltern, Richtungsschalter, Drehzahlpotentiometer und Taschenlampen-LEDs mit Controller</div>
</div>
</div>
<div class="sect2">
<h3 id="hintsFor05">Tipps zum Aufbau der Revision bis 0.5</h3>
<div class="paragraph">
<p>Die Leiterplatte hat Löcher in der Mitte der LED-Footprints, um ihre Positionen mit einer scharfen Nadel auf ein StrapuBox-Gehäuse zu übertragen oder Zentrierlöcher mit einem 1-mm-Bohrer zu bohren. Für alle anderen Löcher steht eine Bohrvorrichtung zur Verfügung, die auch das Bohren von Zentrierlöchern für die Taster, den Richtungsschalter und das Drehzahlpotentiometer ermöglicht. <a href="#drilljigPicture">Verwendung der Originalplatine und der Bohrvorrichtung, um die Positionen der Löcher auf das Gehäuse zu übertragen - bessere Ergebnisse werden erzielt, wenn die Leiterplatten festgeschraubt werden</a> zeigt den Prozess und seine Ergebnisse. Löcher für die Taster sollten mit einem Durchmesser von 3,5 mm gebohrt werden. Löcher für die LEDs sollten bei 3 mm Durchmesser und Löcher für das Drehzahlpotentiometer bei 8 mm, für den Richtungsschalter bei 6,5 mm Durchmesser gebohrt werden. Die Ausschnitte für die Lokauswahlschalter werden am besten bei 1,5 mm gebohrt und mit einer Laubsäge oder einem scharfen Hobbymesser und einer Feile auf die Leiterplatte angepasst.</p>
</div>
<table id="BOM05" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 6. Bauteile für die wiFred-Platine bis Revision 0.5</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C102, C101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4u7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C105, C103, C302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C206, C205</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22p</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C401, C203, C202, C201, C207</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C402, C301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CON101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB_Micro-B_Molex-105017-0001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB-MICRO-B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED - red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23_Handsoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BAR43</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STOP - red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FORWARD - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REVERSE - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D303, D302, D301, D101, D102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED Spacer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D5.0mm_Horicontal_FLIPPED_O1.27mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED white</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D305</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D5.0mm_Horicontal_O1.27mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED white</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT95P270X145-5N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MCP73831T-2ACI_OT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT95P275X110-5N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NCV8161BSN300T1G</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQFP-32_7x7mm_Pitch0.8mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATMEGA328P-A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOT-23-6_Handsoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIC2860-2PYD6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x03_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART_ESP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K402</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x03_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART_AVR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124mm x 35mm x 1.6mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Angled_1x02_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BATT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_2x03_Pitch2.54mm_SMD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x02_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP_BOOTLOAD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R101, R102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">680R</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R103</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2k2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4k7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R304, R303, R302, R204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">220R</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R305</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15k</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R405, R404, R403, R201, R104</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10k</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P160KNPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10k lin P160KNPD-4FC20B10K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW305</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW306</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW307</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW308</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW309</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW310</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW311</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHIFT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW312</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESTOP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW313</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100SP1T1B1M1QEH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIRECTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW314</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW315</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW316</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW_SPST_PTS645</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP-12E_SMD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP-12E</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">X201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crystal_SMD_TXC_7M-4pin_3.2x2.5mm_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14.7456MHz</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Der weitere Aufbau ist die Installation aller Komponenten auf der Leiterplatte, die in <a href="#BOM05">Bauteile für die wiFred-Platine bis Revision 0.5</a> aufgeführt sind. Aus Erfahrung mit der Montage der Prototypen empfiehlt sich die folgende Reihenfolge der Komponenten:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>IC101, IC102, IC201 (Hinweis: PCB drehen, so dass Designator rechts nach oben ist, dann Pin 1 oben links) und IC301</p>
</li>
<li>
<p>X201 und D201</p>
</li>
<li>
<p>USB-Anschluss CON101</p>
</li>
<li>
<p>Kondensatoren und Widerstände in der Größe 0805 (zuerst die auf der gleichen Seite wie die Bauteile zuvor)</p>
</li>
<li>
<p>U401</p>
</li>
<li>
<p>Kondensatoren und Widerstände, die zuvor nicht installiert wurden - das sind R403, R404, R405, C401, C402 und C403</p>
</li>
<li>
<p>Taster SW305 bis SW312 und SW314 bis SW316 - achten Sie darauf, den roten bei SW312 und den gelben bei SW311 zu platzieren</p>
</li>
<li>
<p>Stiftleiste K401, K402 und P401 (korrekte Ausrichtung von K401 und K402 kann durch Hinzufügen eines Jumpers vor dem Löten sichergestellt werden)</p>
</li>
<li>
<p>Pin-Header P101 und P201</p>
</li>
<li>
<p>Lokauswahlschalter SW301 bis SW304</p>
</li>
<li>
<p>LEDs D101, D102 und D301 bis D303 mit 3mm Abstandshaltern zur Leiterplatte - stellen Sie sicher, dass die Anode (langer Pin) mit dem quadratischen Pad ausgerichtet ist</p>
</li>
<li>
<p>LEDs D304 und D305 nach Belieben oben oder unten auf der Leiterplatte installiert - stellen Sie sicher, dass die Anode (langer Pin) mit dem quadratischen Pad ausgerichtet ist</p>
</li>
<li>
<p>Richtungsschalter SW313 (zuerst mit einer 8 mm Sechskantmutter in die Leiterplatte geschraubt, dann mit den Abschnitten von D301, D302 und D303 an den Pads befestigt) und Geschwindigkeitspotentiometer RV301 (zuerst mit einer 10-mm-Sechskantmutter in die Leiterplatte geschraubt)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Um eine vollständige Stückliste zu bilden, schließen Sie auch die <a href="#BOM05extra">Liste der Komponenten für wiFred bis Revision 0.5 ohne elektronische Teile zum Löten auf Leiterplatte</a> aufgeführten Teile ein, die nicht auf die Leiterplatte gelötet, sondern später in der Montage verwendet werden.</p>
</div>
<table id="BOM05extra" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Liste der Komponenten für wiFred bis Revision 0.5 ohne elektronische Teile zum Löten auf Leiterplatte</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Battery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lithium battery 1700mAh</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">H1a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Housing black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strapubox 2090</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or H1b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Housing white</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strapubox 2090</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">J1, J2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jumper</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K1a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potentiometer Knob silver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">or K1b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potentiometer Knob black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124mm x 35mm x 1.6mm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1, S2, S3, S4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mounting Screws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,9mm x 6,5mm</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nach der Bestückung der Leiterplatte mit allen Komponenten müssen die Löcher und Ausschnitte im Gehäuse höchstwahrscheinlich überarbeitet / verlängert werden, um tatsächlich zur Leiterplatte zu passen, dann kann die Leiterplatte mit vier Schrauben in das Gehäuse geschraubt werden. Danach sollte die Batterie an den BATT-Stecker angeschlossen werden. Dabei ist sicherzustellen, dass die Ausrichtung korrekt ist, wie in <a href="#battConnection">Anschluss der Batterie an P101 auf Revision 0.4 - schwarzer Draht ist GND, roter Draht ist Plus</a> gezeigt und auf die Platine gedruckt. Der schwarze Draht ist GND, der rote Draht ist der positive. Dann sollte die Batterie mit doppelseitigem Klebeband auf die Unterseite des Gehäuses geklebt werden, damit sie nicht mit Teilen auf der Leiterplatte kollidiert. insbesondere den Stiftleisten und der Richtungsschalter.</p>
</div>
<div class="paragraph">
<p>Schließlich müssen sowohl der ATMega 328P als auch der ESP8266 mit Firmware programmiert werden, wie in <a href="#flashing05">Schreiben der Firmware auf wiFreds der Revision 0.5 und älter</a> beschrieben.</p>
</div>
</div>
<div class="sect2">
<h3 id="flashing05">Schreiben der Firmware auf wiFreds der Revision 0.5 und älter</h3>
<div class="sect3">
<h4 id="_avr_firmware">AVR firmware</h4>
<div class="paragraph">
<p>Der ATMega 328P wird über die reguläre AVR ISP-Verbindung auf P201 programmiert. Pin 1 - GND - befindet sich in Richtung des Platinenrandes, wie in <a href="#progAVR">Programmieranschluss für ATMega_328P - Pin 1 am violetten Kabel</a> gezeigt. Ein ISP-Dongle mit automatischer Spannungswahl oder 3,3 V Versorgungsspannung sollte verwendet werden, um zu vermeiden, dass eine zu hohe Spannung auf den ESP8266 gelegt wird, der nur 3,3 V unterstützt. Die Firmware für den ATMega 328P befindet sich im Unterverzeichnis software/avr-firmware des <a href="#github">[Github repository für wiFred]</a> mit einer vorkompilierten Hexfile und dem gesamten Quellcode inklusive Makefile, das bei Bedarf neu kompiliert werden kann. Nach dem Schreiben der Firmware-Datei und der eeprom-Datei müssen auch die Fusebits richtig eingestellt werden, wie in der main.c-Datei beschrieben.</p>
</div>
<div id="progAVR" class="imageblock">
<div class="content">
<img src="images/DSC0146.jpg" alt="AVR programmieren">
</div>
<div class="title">Figure 22. Programmieranschluss für ATMega_328P - Pin 1 am violetten Kabel</div>
</div>
</div>
<div class="sect3">
<h4 id="_esp8266_firmware">ESP8266 firmware</h4>
<div class="paragraph">
<p>Der ESP8266 wird mit der Arduino-IDE programmiert, die über einen seriellen Port oder einen USB-zu-seriell-Wandler mit dem K401-Header verbunden ist, wie in <a href="#progESP8266">Programmieranschluss für ESP8266 - GND auf orangefarbenem Draht, dann TXD des Programmierkabels (RXD von ESP8266), dann RXD des Programmierkabels (TXD von ESP8266) - beachten Sie auch den Jumper auf P401</a> gezeigt. Die serielle Schnittstelle muss auf 3,3 V-Pegel sein, wie von einem FTDI232-Gerät, das mit 3,3 V betrieben wird. Um den ESP8266 zu programmieren, muss zunächst der ATMega 328P programmiert, eine Batterie angeschlossen und vernünftig geladen werden und einer der Lokauswahlschalter muss in die "aktivierte" Position bewegt werden, um den ESP8266 einzuschalten.</p>
</div>
<div id="progESP8266" class="imageblock">
<div class="content">
<img src="images/DSC0138.jpg" alt="ESP8266 programmieren">
</div>
<div class="title">Figure 23. Programmieranschluss für ESP8266 - GND auf orangefarbenem Draht, dann TXD des Programmierkabels (RXD von ESP8266), dann RXD des Programmierkabels (TXD von ESP8266) - beachten Sie auch den Jumper auf P401</div>
</div>
<div class="paragraph">
<p>Alle Dateien im unterverzeichnis software/esp-firmware des <a href="#github">[Github repository für wiFred]</a> müssen in einem Ordner abgelegt werden, dann muss die Hauptskizze esp-firmware.ino mit der Arduino-IDE geöffnet werden. Die Einstellungen für die Arduino IDE finden Sie in der Hauptdatei, die Programmierung des Geräts sollte anschließend über die Schaltfläche <strong>Hochladen</strong> im <strong>Sketch</strong>-Menü funktionieren.</p>
</div>
<div class="paragraph">
<p>Um den ESP8266 in den Programmiermodus zu versetzen, muss ein Jumper über den P401-Header gelegt werden, bevor der ESP8266 eingeschaltet wird, indem einer der Lokauswahlschalter aktiviert wird, um das Gerät im Programmiermodus zu starten. Die rote STOP-LED sollte anfangen zu blinken und der Bootloader sollte einige Ergebnisse an der seriellen Schnittstelle anzeigen und während des Downloads sollte auch die LED am ESP8266-Modul blinken.</p>
</div>
<div class="paragraph">
<p>Nach der Programmierung müssen zwei Jumper zwischen den Pin-Headern K401 und K402 platziert werden, um die Kommunikation zwischen dem ESP8266 und dem ATMega 328P zu aktivieren, wie in <a href="#serialJumpers">Kommunikations-Jumper zur Verbindung zwischen ESP8266 und ATMega 328P</a> gezeigt.</p>
</div>
<div id="serialJumpers" class="imageblock">
<div class="content">
<img src="images/DSC0149.jpg" alt="Jumper zur seriellen Verbindung">
</div>
<div class="title">Figure 24. Kommunikations-Jumper zur Verbindung zwischen ESP8266 und ATMega 328P</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oldThrottle">Erster Prototyp mit AA-Akkus</h3>
<div class="paragraph">
<p>Die wiFred Prototyp Hardware ist um einen ESP8266 für die WiFi-Verbindung zentriert. Der ESP8266 liest auch die Lokwahlschalter und die Batteriespannung und kommuniziert über seine serielle Schnittstelle mit einem ATMega 328P-Mikrocontroller, der die LEDs steuert, das Drehzahlpotentiometer, den Richtungsschalter und die Drucktastenschalter für Funktionen und Not-Halt liest. Die Kommunikation erfolgt über einen 2x3-Pin-Header, der es dem Benutzer ermöglicht, ein Programmierkabel an dieselbe serielle Schnittstelle anzuschließen, wenn die Jumper entfernt werden.</p>
</div>
<div class="paragraph">
<p>Der wiFred-Prototyp wird von zwei Batteriezellen der Größe AA angetrieben, die mit einem Step-up-Konverter verbunden sind, der 3,3 V für das gesamte Gerät erzeugt. Sobald ein Paar Batterien in das Batteriefach eingelegt wird, wie die Symbole im Batteriefach zeigen, wird die Drehregler hochgefahren und versucht, eine Verbindung zu einem drahtlosen Netzwerk herzustellen. Die Drehregler wird nicht beschädigt, wenn Batterien falsch eingelegt werden, aber es funktioniert auch nicht. Verwenden Sie NiMH- oder primäre AA-Zellen mit 1,2 V bis 1,5 V Nennspannung, niedrige Selbstentladung NiMH-Zellen wie Eneloop oder ähnliches werden empfohlen.</p>
</div>
<div class="paragraph">
<p>Der Schaltplan ist in mehrere Seiten aufgeteilt und findet sich in <a href="#oldSchematicPage1">Schaltplanseite mit Batterien und Netzteil</a> bis <a href="#oldSchematicPage4">Schaltplanseite mit Tastern, Lokwahlschaltern, Richtungsschalter und Drehzahlpotentiometer</a>. Er wurde mit kicad erstellt und ist zusammen mit dem PCB-Design im <a href="#github">[Github repository für wiFred]</a> verfügbar.</p>
</div>
<div id="oldSchematicPage1" class="imageblock">
<div class="content">
<img src="images/old_wfred_rev2.png" alt="Schematic page 1 for AA battery prototype">
</div>
<div class="title">Figure 25. Schaltplanseite mit Batterien und Netzteil</div>
</div>
<div id="oldSchematicPage2" class="imageblock">
<div class="content">
<img src="images/old_wfred-wifi-Wifi_connection.png" alt="Schematic page 2 for AA battery prototype">
</div>
<div class="title">Figure 26. Schaltplanseite mit ESP8266 für WLAN-Verbindung mit Bootloader-Jumper und Verbindung zum Programmierkabel</div>
</div>
<div id="oldSchematicPage3" class="imageblock">
<div class="content">
<img src="images/old_wfred-controller_rev2-Controller.png" alt="Schematic page 3 for AA battery prototype">
</div>
<div class="title">Figure 27. Schaltplanseite mit ATMega 328P zusammen mit Quartz und in ISP-Anschluss</div>
</div>
<div id="oldSchematicPage4" class="imageblock">
<div class="content">
<img src="images/old_User_interface_rev2-User_Interface.png" alt="Schematic page 4 for AA battery prototype">
</div>
<div class="title">Figure 28. Schaltplanseite mit Tastern, Lokwahlschaltern, Richtungsschalter und Drehzahlpotentiometer</div>
</div>
</div>
<div class="sect2">
<h3 id="_tipps_zum_bau_des_wifred_aa_batterieprototyps">Tipps zum Bau des wiFred AA Batterieprototyps</h3>
<div class="paragraph">
<p>Die Prototyp-Leiterplatte hat Löcher in der Mitte der Taster-Footprints und LED-Footprints, um ihre Positionen mit einer scharfen Nadel oder ähnlichem auf ein StrapuBox-Gehäuse zu übertragen. Die Positionen der Lokauswahlschalter können auch durch Markieren durch die Nicht-Kupferlöcher an ihren Enden auf das Gehäuse übertragen werden. Siehe <a href="#drilljigPicture">Verwendung der Originalplatine und der Bohrvorrichtung, um die Positionen der Löcher auf das Gehäuse zu übertragen - bessere Ergebnisse werden erzielt, wenn die Leiterplatten festgeschraubt werden</a> für Bilder und weitere Details, die Unterschiede zwischen dem AA-Batterieprototyp und den LiPo-Batterierevisionen sind in diesem Aspekt minimal.</p>
</div>
<div class="paragraph">
<p>Der weitere Aufbau ist die Installation aller Komponenten auf der Leiterplatte, die in <a href="#oldWiFredBOM">Liste der Komponenten für AA-Batterie-Prototyp</a> aufgeführt sind.</p>
</div>
<table id="oldWiFredBOM" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 8. Liste der Komponenten für AA-Batterie-Prototyp</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Designator</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KEYSTONE1013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BATT_HOLDER</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C206, C205</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22p</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C301, C105, C104, C102, C101, C402</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C401, C204, C203, C202, C201, C103</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STOP - red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FORWARD - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LED_D3.0mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REVERSE - green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IC201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TQFP-32_7x7mm_Pitch0.8mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATMEGA328P-A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x03_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART_ESP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K402</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x03_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART_AVR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L_2424_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22u</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_2x03_Pitch2.54mm_SMD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pin_Header_Straight_1x02_Pitch2.54mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP_BOOTLOAD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4k7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R304, R303, R302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">470R</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100k</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R402</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">47k</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">R405, R404, R403, R201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C_0805_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10k</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P160KNPD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10k lin P160KNPD-4FC20B10K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW302</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS102011MS2Q</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOCO4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW305</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW306</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW307</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW308</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW309</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW310</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHIFT2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW311</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHIFT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW312</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC621G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESTOP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SW313</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100SP1T1B1M1QEH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIRECTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TSSOP-8_4.4x3mm_Pitch0.65mm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L6920D</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP-12E_SMD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESP-12E</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">X201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crystal_SMD_TXC_7M-4pin_3.2x2.5mm_HandSoldering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14.7456MHz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gehäuse StrapuBox 6090</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zwei Jumper, 2,54 mm</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potentiometerknopf, 21 mm</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drei Befestigungsschrauben, 2,9 mm Durchmesser x 6,5 mm</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nach der Montage der Leiterplatte mit allen Komponenten und dem Bohren und Schneiden der Löcher und Ausschnitte in das Gehäuse sind nur noch wenige Schritte übrig. Zuerst müssen einige Vorsprünge im Inneren des Gehäuses entfernt werden, damit die Leiterplatte richtig passt. <a href="#breakProtrusions">Entfernen von Vorsprüngen im Gehäuse, damit die Leiterplatte passt</a> zeigt, wie sie leicht entfernt werden können, Reste können mit einem Hobbymesser abgeschnitten werden. Zweitens müssen neue PCB-Montagepads installiert werden, wie in <a href="#mountingPads">Neue PCB-Montagepads aus 3 mm starkem Forex PVC</a> gezeigt. Für den Prototyp wurde Forex PVC-Schaum verwendet, mit einer Schere geschnitten und mit Sekundenkleber auf das Gehäuse geklebt, um sicherzustellen, dass keine Komponenten auf der Leiterplatte im Weg sind, aber jede Art von leicht zu arbeitendem Material mit einer Dicke von 3 mm kann verwendet werden, solange es selbstschneidende Schrauben nimmt (Prototyp verwendet 2,9 mm x 6,5 mm DIN 7981 Schrauben). Drittens benötigen die beiden Shiftttasten gelbe Farbe auf der Oberseite und die Nothalt-Taste rote Farbe - entweder irgendeine Art von Farbe oder ein Farbmarker wie Edding 751. Schließlich müssen sowohl der ESP8266 als auch der ATMega 328P wie in <a href="#flashing05">Schreiben der Firmware auf wiFreds der Revision 0.5 und älter</a> beschrieben programmiert werden.</p>
</div>
<div id="breakProtrusions" class="imageblock">
<div class="content">
<img src="images/DSC8654.jpg" alt="Vorsprünge im Gehäuse abbrechen">
</div>
<div class="title">Figure 29. Entfernen von Vorsprüngen im Gehäuse, damit die Leiterplatte passt</div>
</div>
<div id="mountingPads" class="imageblock">
<div class="content">
<img src="images/DSC8658.jpg" alt="Neue Platinenhalter">
</div>
<div class="title">Figure 30. Neue PCB-Montagepads aus 3 mm starkem Forex PVC</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background">Hintergrund für die wiFred-Entwicklung</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Zum Zeitpunkt des Schreibens dieses Dokuments hat <a href="#JMRI">[JMRI]</a> bereits eine lange Erfolgsbilanz bei der Bereitstellung eines Servers für die Verwendung von Smartphones als drahtlose Modelleisenbahn-Handregler, zusammen mit Apps wie <a href="#wiThrottleApp">[wiThrottle]</a><sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup> und <a href="#EngineDriver">[EngineDriver]</a>. Dieser Server ermöglicht WLAN-Handregler, um Loks jedes Modelleisenbahnlayout zu steuern, zu dem JMRI eine Verbindung aufbauen kann <a href="#jmrihardwaresupport">[Supported Hardware]</a>. Darüber hinaus bieten <a href="#Digitrax">[Digitrax LNWI]</a> und <a href="#MRC">[MRC Prodigy WiFi]</a> spezifische Hardwarelösungen an, um die Verbindung der oben genannten Smartphone-Apps mit ihren DCC-Systemen über ein WLAN-Netzwerk zu ermöglichen.</p>
</div>
<div class="paragraph">
<p>Der <a href="#Fremo">[Fremo]</a> ist ein europäischer modularer Modelleisenbahnclub, dessen einzigartige Anforderungen an seine DCC-Handregler zur Schaffung der Handregler <a href="#FRED">[FRED]</a> und <a href="#FREDI">[FREDI]</a> führten - eine Reihe von LocoNet-Handregler, die als Hobbyprojekte mit großen Stückzahlen im Umlauf begannen, später von <a href="#Uhlenbrock">[Uhlenbrock]</a> kommerziell erhältlich waren.</p>
</div>
<div class="sect2">
<h3 id="_spezifikation_wunschliste">Spezifikation Wunschliste</h3>
<div class="paragraph">
<p>Bei modularen Eisenbahnveranstaltungen, insbesondere der Fremo-americaN-Gruppe, haben mehrere Personen die Smartphone-Handregler-Apps ausprobiert und festgestellt, dass ihnen ein schönes, haptisches Feedback fehlt. Aber die Idee der drahtlosen Steuerung ohne Bindung an einen bestimmten Anbieter und deren notwendigerweise teure Ausrüstung fand große Zustimmung. Also wurde eine Wunschliste zusammengestellt, um die Anforderungen an eine drahtlose Drehregler zu definieren:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Gleicher Formfaktor wie der <a href="#FRED">[FRED]</a> mit ähnlicher Bedienung</p>
</li>
<li>
<p>Möglichkeit, mindestens zwei, bessere vier Lokomotiven für Doppel-/Dreifachtraktion zu steuern (ähnlich dem Duo-FREDI)</p>
</li>
<li>
<p>Akkulaufzeit von mindestens sechs Stunden</p>
</li>
<li>
<p>Austauschbare Batterien, so dass, wenn der Akku leer ist, sie schnell gegen ein geladenes Set oder billige Primärzellen ausgetauscht werden können</p>
</li>
<li>
<p>Einfache Konfiguration, aber nicht zu einfach, um zu verhindern, dass Bediener versehentlich andere Lokomotiven auswählen</p>
</li>
<li>
<p>So wenig Änderung am bestehenden Fremo Loconet Netzwerk wie möglich</p>
</li>
<li>
<p>Verwendung des wiThrottle-Protokolls, so dass davon ausgegangen werden kann, dass die Serverseite der Kommunikation funktioniert und nicht ebenso entwickelt werden muss</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_entwicklungsgeschichte">Entwicklungsgeschichte</h3>
<div class="paragraph">
<p>Die ersten Prototypen des wiFred wurden so gebaut, dass sie mit zwei AA-Zellen betrieben werden, entweder Batterien oder wiederaufladbaren NiMH-Akkus. Wie in <a href="#oldThrottle">Erster Prototyp mit AA-Akkus</a> beschrieben, erforderte dies einige spezielle Anpassungen des Gehäuses, um alle Komponenten unterzupassen. Schon damals zeigte die Erfahrung mit den Prototypen, dass die Batteriefachabdeckung nicht wirklich passte und beim Versuch, das Batteriefach zu öffnen und zu schließen, leicht kaputt ging.</p>
</div>
<div class="paragraph">
<p>So wurden die nächsten Versionen um einen integrierte Lithiumakku herum entwickelt, womit die Option verloren ging, leere Batterien einfach auszutauschen. Dafür war die Laufzeit länger und die Elektronik passte richtig in das Gehäuse. Das Aufladen der zweiten Generation erfolgt über einen Micro-USB-Anschluss, so dass eine Powerbank die Laufzeit des Geräts verlängern kann, wenn der interne Akku erschöpft ist. Außerdem fungieren die Lokauswahlschalter mehr als ein Netzschalter als bei den ersten Prototypen und reduzieren den Stromverbrauch auf einen vernachlässigbaren Betrag, wenn alle Loks deaktiviert sind.</p>
</div>
<div class="paragraph">
<p>Der neueste Prototyp wird von zwei Prozessoren auf einen einzigen, neuen ESP32-S2-Prozessor umgestellt, was Platz spart, die Anzahl der Komponenten reduziert, alle SMD-Komponenten auf einer Seite der Leiterplatte platziert und einen direkten USB-Firmware-Download ermöglicht. Es wird keine neuen Funktionen gegenüber den früheren LiPo-Akkuversionen enthalten, aber hauptsächlich für den Bastler einfacher zu bauen sein.</p>
</div>
</div>
<div class="sect2">
<h3 id="_drahtlose_uhr">Drahtlose Uhr</h3>
<div class="paragraph">
<p>Während der Entwicklung dieses wiFred kam in der americaN-Gruppe der Fremo ein weiteres Thema auf, nämlich drahtlose Uhren mit einstellbarer Taktrate für Timetable &amp; Trainorder-Betrieb. Dies führte zur Ausgliederung des <a href="#wiClock">[wiClock]</a>-Projekts.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quellen">Quellen</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="github"></a>[Github repository für wiFred] newHeiko/wiFred: wiThrottle-compatible hardware controller, <a href="https://github.com/newHeiko/wiFred" class="bare">https://github.com/newHeiko/wiFred</a></p>
</li>
<li>
<p><a id="JMRI"></a>[JMRI] JMRI: A Java Model Railroad Interface, <a href="https://www.jmri.org" class="bare">https://www.jmri.org</a></p>
</li>
<li>
<p><a id="jmrihardwaresupport"></a>[Supported Hardware] JMRI: Hardware Support, <a href="https://www.jmri.org/help/en/html/hardware/index.shtml" class="bare">https://www.jmri.org/help/en/html/hardware/index.shtml</a></p>
</li>
<li>
<p><a id="wiThrottleApp"></a>[wiThrottle] WiThrottle, <a href="https://www.withrottle.com/html/home.html" class="bare">https://www.withrottle.com/html/home.html</a></p>
</li>
<li>
<p><a id="EngineDriver"></a>[EngineDriver] Home | EngineDriver, <a href="https://enginedriver.mstevetodd.com/" class="bare">https://enginedriver.mstevetodd.com/</a></p>
</li>
<li>
<p><a id="Fremo"></a>[Fremo] Home - FREMO - Freundeskreis Europäischer Modelleisenbahner e.V., <a href="https://www.fremo-net.eu/" class="bare">https://www.fremo-net.eu/</a></p>
</li>
<li>
<p><a id="FRED"></a>[FRED] FRED, <a href="http://fremodcc.sourceforge.net/diy/fred/fred_d.html" class="bare">http://fremodcc.sourceforge.net/diy/fred/fred_d.html</a></p>
</li>
<li>
<p><a id="FREDI"></a>[FREDI] FREDI, <a href="http://fremodcc.sourceforge.net/diy/fred2/fredi_d.html" class="bare">http://fremodcc.sourceforge.net/diy/fred2/fredi_d.html</a></p>
</li>
<li>
<p><a id="Uhlenbrock"></a>[Uhlenbrock] Uhlenbrock | FRED, der Handregler für die Intellibox, <a href="https://uhlenbrock.de/de_DE/produkte/prodarch/I62AD172-001.htm!ArcEntryInfo=0004.41.I62AD172" class="bare">https://uhlenbrock.de/de_DE/produkte/prodarch/I62AD172-001.htm!ArcEntryInfo=0004.41.I62AD172</a></p>
</li>
<li>
<p><a id="Digitrax"></a>[Digitrax LNWI] LocoNet WiFi interface, <a href="https://www.digitrax.com/products/wireless/lnwi/" class="bare">https://www.digitrax.com/products/wireless/lnwi/</a></p>
</li>
<li>
<p><a id="MRC"></a>[MRC Prodigy WiFi] Prodigy WiFi, <a href="https://www.modelrectifier.com/Prodigy-WiFi-s/332.htm" class="bare">https://www.modelrectifier.com/Prodigy-WiFi-s/332.htm</a></p>
</li>
<li>
<p><a id="rpiImage"></a>[Steve Todd] JMRI RaspberryPi as Access Point | M Steve Todd, <a href="https://mstevetodd.com/rpi" class="bare">https://mstevetodd.com/rpi</a></p>
</li>
<li>
<p><a id="wiClock"></a>[wiClock] wiClock, a WiFi-JMRI-Clock, zu finden unter <a href="https://github.com/newHeiko/WiFi-JMRI-Clock" class="bare">https://github.com/newHeiko/WiFi-JMRI-Clock</a> und Dokumentation unter <a href="https://newHeiko.github.io/WiFi-JMRI-Clock" class="bare">https://newHeiko.github.io/WiFi-JMRI-Clock</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Nur verfügbar für Versionen ab 0.6 mit ESP32-S2 MCU
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Pre-Shared Key, oft nur Passwort genannt
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. Tastende Funktionen werden nur aktiviert, solange die Funktionstaste gedrückt wird - wie eine Pfeife oder eine Hupe, die genauso lange ertönt, wie die Taste gedrückt wird.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. Rastende Funktionen werden mit jedem Druck auf die Funktionstaste umgeschaltet - wie das erste Drücken von F0 normalerweise das Spitzenlicht einschaltet, das nächste Drücken von F0 schaltet es wieder aus.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. Die JMRI-Einstellung "F2 always momentary" überschreibt dies.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. Dadurch werden auch momentane Funktionen dauerhaft eingeschaltet.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. Diese Einstellung ist kompatibel mit der "Segeln"-Funktion des Fredi
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. wiThrottle ist auch der Name, den JMRI für das Protokoll und den Server verwendet.
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.3<br>
Last updated 2022-02-11 21:39:37 +0100
</div>
</div>
</body>
</html>